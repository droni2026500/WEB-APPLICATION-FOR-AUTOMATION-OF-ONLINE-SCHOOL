{"ast":null,"code":"!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t(require(\"powerbi-client\"), require(\"react\"), require(\"lodash.isequal\")) : \"function\" == typeof define && define.amd ? define([\"powerbi-client\", \"react\", \"lodash.isequal\"], t) : \"object\" == typeof exports ? exports[\"powerbi-client-react\"] = t(require(\"powerbi-client\"), require(\"react\"), require(\"lodash.isequal\")) : e[\"powerbi-client-react\"] = t(e[\"powerbi-client\"], e.react, e[\"lodash.isequal\"]);\n}(window, function (e, t, r) {\n  return function (e) {\n    var t = {};\n\n    function r(n) {\n      if (t[n]) return t[n].exports;\n      var o = t[n] = {\n        i: n,\n        l: !1,\n        exports: {}\n      };\n      return e[n].call(o.exports, o, o.exports, r), o.l = !0, o.exports;\n    }\n\n    return r.m = e, r.c = t, r.d = function (e, t, n) {\n      r.o(e, t) || Object.defineProperty(e, t, {\n        enumerable: !0,\n        get: n\n      });\n    }, r.r = function (e) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(e, \"__esModule\", {\n        value: !0\n      });\n    }, r.t = function (e, t) {\n      if (1 & t && (e = r(e)), 8 & t) return e;\n      if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n      var n = Object.create(null);\n      if (r.r(n), Object.defineProperty(n, \"default\", {\n        enumerable: !0,\n        value: e\n      }), 2 & t && \"string\" != typeof e) for (var o in e) {\n        r.d(n, o, function (t) {\n          return e[t];\n        }.bind(null, o));\n      }\n      return n;\n    }, r.n = function (e) {\n      var t = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return r.d(t, \"a\", t), t;\n    }, r.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, r.p = \"\", r(r.s = 3);\n  }([function (t, r) {\n    t.exports = e;\n  }, function (e, r) {\n    e.exports = t;\n  }, function (e, t) {\n    e.exports = r;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    r.r(t), r.d(t, \"EmbedType\", function () {\n      return c;\n    }), r.d(t, \"PowerBIEmbed\", function () {\n      return f;\n    });\n    var n = r(1),\n        o = r(0),\n        i = r(2),\n        s = r.n(i);\n\n    var _a,\n        c,\n        p = (_a = function a(e, t) {\n      return (_a = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (e, t) {\n        e.__proto__ = t;\n      } || function (e, t) {\n        for (var r in t) {\n          t.hasOwnProperty(r) && (e[r] = t[r]);\n        }\n      })(e, t);\n    }, function (e, t) {\n      function r() {\n        this.constructor = e;\n      }\n\n      _a(e, t), e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype, new r());\n    }),\n        u = function u(e, t, r, n) {\n      return new (r || (r = Promise))(function (o, i) {\n        function s(e) {\n          try {\n            c(n.next(e));\n          } catch (e) {\n            i(e);\n          }\n        }\n\n        function a(e) {\n          try {\n            c(n.throw(e));\n          } catch (e) {\n            i(e);\n          }\n        }\n\n        function c(e) {\n          var t;\n          e.done ? o(e.value) : (t = e.value, t instanceof r ? t : new r(function (e) {\n            e(t);\n          })).then(s, a);\n        }\n\n        c((n = n.apply(e, t || [])).next());\n      });\n    },\n        l = function l(e, t) {\n      var r,\n          n,\n          o,\n          i,\n          s = {\n        label: 0,\n        sent: function sent() {\n          if (1 & o[0]) throw o[1];\n          return o[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return i = {\n        next: a(0),\n        throw: a(1),\n        return: a(2)\n      }, \"function\" == typeof Symbol && (i[Symbol.iterator] = function () {\n        return this;\n      }), i;\n\n      function a(i) {\n        return function (a) {\n          return function (i) {\n            if (r) throw new TypeError(\"Generator is already executing.\");\n\n            for (; s;) {\n              try {\n                if (r = 1, n && (o = 2 & i[0] ? n.return : i[0] ? n.throw || ((o = n.return) && o.call(n), 0) : n.next) && !(o = o.call(n, i[1])).done) return o;\n\n                switch (n = 0, o && (i = [2 & i[0], o.value]), i[0]) {\n                  case 0:\n                  case 1:\n                    o = i;\n                    break;\n\n                  case 4:\n                    return s.label++, {\n                      value: i[1],\n                      done: !1\n                    };\n\n                  case 5:\n                    s.label++, n = i[1], i = [0];\n                    continue;\n\n                  case 7:\n                    i = s.ops.pop(), s.trys.pop();\n                    continue;\n\n                  default:\n                    if (!(o = s.trys, (o = o.length > 0 && o[o.length - 1]) || 6 !== i[0] && 2 !== i[0])) {\n                      s = 0;\n                      continue;\n                    }\n\n                    if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {\n                      s.label = i[1];\n                      break;\n                    }\n\n                    if (6 === i[0] && s.label < o[1]) {\n                      s.label = o[1], o = i;\n                      break;\n                    }\n\n                    if (o && s.label < o[2]) {\n                      s.label = o[2], s.ops.push(i);\n                      break;\n                    }\n\n                    o[2] && s.ops.pop(), s.trys.pop();\n                    continue;\n                }\n\n                i = t.call(e, s);\n              } catch (e) {\n                i = [6, e], n = 0;\n              } finally {\n                r = o = 0;\n              }\n            }\n\n            if (5 & i[0]) throw i[1];\n            return {\n              value: i[0] ? i[1] : void 0,\n              done: !0\n            };\n          }([i, a]);\n        };\n      }\n    },\n        d = function d() {\n      for (var e = 0, t = 0, r = arguments.length; t < r; t++) {\n        e += arguments[t].length;\n      }\n\n      var n = Array(e),\n          o = 0;\n\n      for (t = 0; t < r; t++) {\n        for (var i = arguments[t], s = 0, a = i.length; s < a; s++, o++) {\n          n[o] = i[s];\n        }\n      }\n\n      return n;\n    };\n\n    !function (e) {\n      e.Report = \"report\", e.Dashboard = \"dashboard\", e.Tile = \"tile\", e.Qna = \"qna\", e.Visual = \"visual\";\n    }(c || (c = {}));\n\n    var f = function (e) {\n      function t(t) {\n        var r = e.call(this, t) || this;\n        return r.containerRef = n.createRef(), r.prevEventHandlerMapString = \"\", r.props.service ? r.powerbi = r.props.service : r.powerbi = new o.service.Service(o.factories.hpmFactory, o.factories.wpmpFactory, o.factories.routerFactory), r;\n      }\n\n      return p(t, e), Object.defineProperty(t.prototype, \"embed\", {\n        get: function get() {\n          return this._embed;\n        },\n        set: function set(e) {\n          this._embed = e, this.invokeGetEmbedCallback();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype.componentDidMount = function () {\n        this.containerRef.current && (this.props.embedConfig.accessToken && this.props.embedConfig.embedUrl ? this.embedEntity() : this.embed = this.powerbi.bootstrap(this.containerRef.current, this.props.embedConfig)), this.props.eventHandlers && this.embed && this.setEventHandlers(this.embed, this.props.eventHandlers);\n      }, t.prototype.componentDidUpdate = function (e) {\n        return u(this, void 0, void 0, function () {\n          var t, r, n, o;\n          return l(this, function (i) {\n            switch (i.label) {\n              case 0:\n                return this.embedOrUpdateAccessToken(e), this.props.eventHandlers && this.embed && this.setEventHandlers(this.embed, this.props.eventHandlers), s()(this.props.embedConfig.settings, e.embedConfig.settings) ? [3, 2] : [4, this.updateSettings()];\n\n              case 1:\n                i.sent(), i.label = 2;\n\n              case 2:\n                if (this.props.embedConfig.type !== c.Report) return [3, 11];\n                i.label = 3;\n\n              case 3:\n                return i.trys.push([3, 10,, 11]), t = this.props.embedConfig, r = t.filters, n = e.embedConfig, t.pageName && t.pageName !== n.pageName ? [4, this.embed.setPage(t.pageName)] : [3, 5];\n\n              case 4:\n                i.sent(), i.label = 5;\n\n              case 5:\n                return !r || s()(r, n.filters) ? [3, 7] : [4, this.embed.setFilters(r)];\n\n              case 6:\n                return i.sent(), [3, 9];\n\n              case 7:\n                return r || !n.filters ? [3, 9] : [4, this.embed.removeFilters()];\n\n              case 8:\n                i.sent(), i.label = 9;\n\n              case 9:\n                return [3, 11];\n\n              case 10:\n                return o = i.sent(), console.error(o), [3, 11];\n\n              case 11:\n                return [2];\n            }\n          });\n        });\n      }, t.prototype.componentWillUnmount = function () {\n        this.containerRef.current && this.powerbi.reset(this.containerRef.current);\n      }, t.prototype.render = function () {\n        return n.createElement(\"div\", {\n          ref: this.containerRef,\n          className: this.props.cssClassName\n        });\n      }, t.prototype.embedEntity = function () {\n        this.containerRef.current && (this.props.phasedEmbedding && this.props.embedConfig.type === c.Report ? this.embed = this.powerbi.load(this.containerRef.current, this.props.embedConfig) : (this.props.phasedEmbedding && console.error(\"Phased embedding is not supported for type \" + this.props.embedConfig.type), this.embed = this.powerbi.embed(this.containerRef.current, this.props.embedConfig)));\n      }, t.prototype.embedOrUpdateAccessToken = function (e) {\n        this.props.embedConfig.accessToken && this.props.embedConfig.embedUrl && (!this.containerRef.current || e.embedConfig.accessToken && this.props.embedConfig.embedUrl === e.embedConfig.embedUrl ? this.props.embedConfig.accessToken !== e.embedConfig.accessToken && this.props.embedConfig.embedUrl === e.embedConfig.embedUrl && this.embed && this.embed.setAccessToken(this.props.embedConfig.accessToken).catch(function (e) {\n          console.error(\"setAccessToken error: \" + e);\n        }) : this.embedEntity());\n      }, t.prototype.setEventHandlers = function (e, t) {\n        var r = this,\n            n = function (e) {\n          if (!e) return \"\";\n          var t = Array.from(e);\n          return JSON.stringify(t.map(function (e) {\n            return [e[0], e[1] ? e[1].toString() : \"\"];\n          }));\n        }(this.props.eventHandlers);\n\n        if (this.prevEventHandlerMapString !== n) {\n          this.prevEventHandlerMapString = n;\n          var i = o.Embed.allowedEvents,\n              s = e.embedtype;\n\n          switch (s) {\n            case c.Report:\n              i = d(i, o.Report.allowedEvents);\n              break;\n\n            case c.Dashboard:\n              i = d(i, o.Dashboard.allowedEvents);\n              break;\n\n            case c.Tile:\n              i = d(i, o.Tile.allowedEvents);\n              break;\n\n            case c.Qna:\n              i = d(i, o.Qna.allowedEvents);\n              break;\n\n            case c.Visual:\n              i = d(i, o.Visual.allowedEvents);\n              break;\n\n            default:\n              console.error(\"Invalid embed type \" + s);\n          }\n\n          var a = [];\n          t.forEach(function (t, n) {\n            i.includes(n) ? (e.off(n), t && e.on(n, function (e) {\n              t(e, r.embed);\n            })) : a.push(n);\n          }), a.length && console.error(\"Following events are invalid: \" + a.join(\",\"));\n        }\n      }, t.prototype.invokeGetEmbedCallback = function () {\n        this.props.getEmbeddedComponent && this.embed && this.props.getEmbeddedComponent(this.embed);\n      }, t.prototype.updateSettings = function () {\n        return u(this, void 0, void 0, function () {\n          var e, t;\n          return l(this, function (r) {\n            switch (r.label) {\n              case 0:\n                if (!this.embed || !this.props.embedConfig.settings) return [2];\n\n                switch (this.props.embedConfig.type) {\n                  case c.Report:\n                    return [3, 1];\n\n                  case c.Dashboard:\n                  case c.Tile:\n                  case c.Qna:\n                  case c.Visual:\n                    return [3, 6];\n                }\n\n                return [3, 7];\n\n              case 1:\n                e = this.props.embedConfig.settings, r.label = 2;\n\n              case 2:\n                return r.trys.push([2, 4,, 5]), [4, this.embed.updateSettings(e)];\n\n              case 3:\n                return r.sent(), [3, 5];\n\n              case 4:\n                return t = r.sent(), console.error(\"Error in method updateSettings: \" + t), [3, 5];\n\n              case 5:\n              case 6:\n                return [3, 8];\n\n              case 7:\n                console.error(\"Invalid embed type \" + this.props.embedConfig.type), r.label = 8;\n\n              case 8:\n                return [2];\n            }\n          });\n        });\n      }, t;\n    }(n.Component);\n  }]);\n});","map":null,"metadata":{},"sourceType":"script"}