{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/skhotwow/Desktop/\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C/client/src/components/wrappers/PrivateRoute.js\";\n\nimport { useSelector } from \"react-redux\";\nimport { Navigate, Route, useLocation } from \"react-router-dom\";\nimport NotFound from \"../notFound/NotFound\";\nexport var PrivateRoute = function PrivateRoute(_ref) {\n  var children = _ref.children,\n      roles = _ref.roles;\n  var location = useLocation();\n\n  var _useSelector = useSelector(function (state) {\n    return state.auth;\n  }),\n      isAuthenticated = _useSelector.isAuthenticated,\n      user = _useSelector.user,\n      loading = _useSelector.loading;\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      className: \"container\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 12\n      }\n    }, \"Checking auth..\");\n  }\n\n  var userHasRequiredRole = user && roles.includes(user.role) ? true : false;\n\n  if (!isAuthenticated) {\n    return /*#__PURE__*/React.createElement(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 12\n      }\n    });\n  }\n\n  if (isAuthenticated && !userHasRequiredRole) {\n    return /*#__PURE__*/React.createElement(NotFound, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return children;\n};","map":{"version":3,"names":["useSelector","Navigate","Route","useLocation","NotFound","PrivateRoute","children","roles","location","state","auth","isAuthenticated","user","loading","userHasRequiredRole","includes","role","from"],"sources":["/Users/skhotwow/Desktop/Диплом/client/src/components/wrappers/PrivateRoute.js"],"sourcesContent":["\nimport { useSelector } from \"react-redux\";\nimport { Navigate, Route, useLocation } from \"react-router-dom\";\nimport NotFound from \"../notFound/NotFound\";\n\nexport const PrivateRoute = ({ children, roles }) => {\n  let location = useLocation();\n  const { isAuthenticated, user, loading } = useSelector((state) => state.auth);\n\n  if (loading) {\n    return <p className=\"container\">Checking auth..</p>;\n  }\n\n  const userHasRequiredRole = user && roles.includes(user.role) ? true : false;\n\n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" state={{ from: location }} />;\n  }\n\n  if (isAuthenticated && !userHasRequiredRole) {\n    return <NotFound />;\n  }\n\n  return children;\n};\n"],"mappings":";;;AACA,SAASA,WAAT,QAA4B,aAA5B;AACA,SAASC,QAAT,EAAmBC,KAAnB,EAA0BC,WAA1B,QAA6C,kBAA7C;AACA,OAAOC,QAAP,MAAqB,sBAArB;AAEA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAAyB;EAAA,IAAtBC,QAAsB,QAAtBA,QAAsB;EAAA,IAAZC,KAAY,QAAZA,KAAY;EACnD,IAAIC,QAAQ,GAAGL,WAAW,EAA1B;;EADmD,mBAERH,WAAW,CAAC,UAACS,KAAD;IAAA,OAAWA,KAAK,CAACC,IAAjB;EAAA,CAAD,CAFH;EAAA,IAE3CC,eAF2C,gBAE3CA,eAF2C;EAAA,IAE1BC,IAF0B,gBAE1BA,IAF0B;EAAA,IAEpBC,OAFoB,gBAEpBA,OAFoB;;EAInD,IAAIA,OAAJ,EAAa;IACX,oBAAO;MAAG,SAAS,EAAC,WAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,qBAAP;EACD;;EAED,IAAMC,mBAAmB,GAAGF,IAAI,IAAIL,KAAK,CAACQ,QAAN,CAAeH,IAAI,CAACI,IAApB,CAAR,GAAoC,IAApC,GAA2C,KAAvE;;EAEA,IAAI,CAACL,eAAL,EAAsB;IACpB,oBAAO,oBAAC,QAAD;MAAU,EAAE,EAAC,QAAb;MAAsB,KAAK,EAAE;QAAEM,IAAI,EAAET;MAAR,CAA7B;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAP;EACD;;EAED,IAAIG,eAAe,IAAI,CAACG,mBAAxB,EAA6C;IAC3C,oBAAO,oBAAC,QAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAP;EACD;;EAED,OAAOR,QAAP;AACD,CAnBM"},"metadata":{},"sourceType":"module"}