{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/skhotwow/Desktop/\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C/client/src/components/wrappers/PrivateRoute.js\";\n\nimport React, { useContext } from \"react\";\nimport { Navigate, Route, useLocation } from \"react-router-dom\";\nimport NotFound from \"../notFound/NotFound\";\nimport { Context } from \"../../index\";\nexport var PrivateRoute = function PrivateRoute(_ref) {\n  var children = _ref.children,\n      roles = _ref.roles;\n\n  var _useContext = useContext(Context),\n      store = _useContext.store;\n\n  var location = useLocation();\n  var role = localStorage.getItem(\"role\");\n\n  var _ref2 = function _ref2(state) {\n    return state.auth;\n  },\n      user = _ref2.user;\n\n  console.log(roles.includes(role));\n\n  if (store.isLoading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 12\n      }\n    });\n  }\n\n  var userHasRequiredRole = roles.includes(role) ? true : false;\n  console.log(user); // if (!store.isAuth) {\n  //   return <Navigate to=\"/login\" state={{ from: location }} />;\n  // }\n\n  if (store.isAuth && !userHasRequiredRole) {\n    return /*#__PURE__*/React.createElement(NotFound, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return children;\n};","map":{"version":3,"names":["React","useContext","Navigate","Route","useLocation","NotFound","Context","PrivateRoute","children","roles","store","location","role","localStorage","getItem","state","auth","user","console","log","includes","isLoading","userHasRequiredRole","isAuth"],"sources":["/Users/skhotwow/Desktop/Диплом/client/src/components/wrappers/PrivateRoute.js"],"sourcesContent":["import React, {useContext} from \"react\";\nimport { Navigate, Route, useLocation } from \"react-router-dom\";\nimport NotFound from \"../notFound/NotFound\";\nimport {Context} from \"../../index\";\n\nexport const PrivateRoute = ({ children, roles }) => {\n  const { store } = useContext(Context);\n  let location = useLocation();\n  const role = localStorage.getItem(\"role\");\n  const { user } = ((state) => state.auth);\n  console.log(roles.includes(role))\n\n\n  if (store.isLoading) {\n    return <div></div>;\n  }\n\n  const userHasRequiredRole = roles.includes(role) ? true : false;\n  console.log(user)\n\n  // if (!store.isAuth) {\n  //   return <Navigate to=\"/login\" state={{ from: location }} />;\n  // }\n\n  if (store.isAuth && !userHasRequiredRole) {\n    return <NotFound />;\n  }\n\n  return children;\n};\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,UAAf,QAAgC,OAAhC;AACA,SAASC,QAAT,EAAmBC,KAAnB,EAA0BC,WAA1B,QAA6C,kBAA7C;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AAEA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAAyB;EAAA,IAAtBC,QAAsB,QAAtBA,QAAsB;EAAA,IAAZC,KAAY,QAAZA,KAAY;;EAAA,kBACjCR,UAAU,CAACK,OAAD,CADuB;EAAA,IAC3CI,KAD2C,eAC3CA,KAD2C;;EAEnD,IAAIC,QAAQ,GAAGP,WAAW,EAA1B;EACA,IAAMQ,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb;;EAHmD,YAIjC,eAACC,KAAD;IAAA,OAAWA,KAAK,CAACC,IAAjB;EAAA,CAJiC;EAAA,IAI3CC,IAJ2C,SAI3CA,IAJ2C;;EAKnDC,OAAO,CAACC,GAAR,CAAYV,KAAK,CAACW,QAAN,CAAeR,IAAf,CAAZ;;EAGA,IAAIF,KAAK,CAACW,SAAV,EAAqB;IACnB,oBAAO;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAP;EACD;;EAED,IAAMC,mBAAmB,GAAGb,KAAK,CAACW,QAAN,CAAeR,IAAf,IAAuB,IAAvB,GAA8B,KAA1D;EACAM,OAAO,CAACC,GAAR,CAAYF,IAAZ,EAbmD,CAenD;EACA;EACA;;EAEA,IAAIP,KAAK,CAACa,MAAN,IAAgB,CAACD,mBAArB,EAA0C;IACxC,oBAAO,oBAAC,QAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAP;EACD;;EAED,OAAOd,QAAP;AACD,CAxBM"},"metadata":{},"sourceType":"module"}