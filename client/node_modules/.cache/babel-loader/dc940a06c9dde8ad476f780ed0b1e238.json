{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/skhotwow/Desktop/\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C/client/src/components/wrappers/PrivateRoute.js\";\n\nimport React, { useContext } from \"react\";\nimport { Navigate, Route, useLocation } from \"react-router-dom\";\nimport NotFound from \"../notFound/NotFound\";\nimport { Context } from \"../../index\";\nexport var PrivateRoute = function PrivateRoute(_ref) {\n  var children = _ref.children,\n      roles = _ref.roles;\n\n  var _useContext = useContext(Context),\n      store = _useContext.store;\n\n  var location = useLocation();\n  var role = localStorage.getItem(\"role\");\n\n  if (store.isLoading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 12,\n        columnNumber: 12\n      }\n    });\n  }\n\n  var userHasRequiredRole = role && roles.includes(role) ? true : false;\n  console.log(role);\n\n  if (!store.isAuth) {\n    return /*#__PURE__*/React.createElement(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 12\n      }\n    });\n  }\n\n  if (store.isAuth && !userHasRequiredRole) {\n    return /*#__PURE__*/React.createElement(NotFound, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return children;\n};","map":{"version":3,"names":["React","useContext","Navigate","Route","useLocation","NotFound","Context","PrivateRoute","children","roles","store","location","role","localStorage","getItem","isLoading","userHasRequiredRole","includes","console","log","isAuth","from"],"sources":["/Users/skhotwow/Desktop/Диплом/client/src/components/wrappers/PrivateRoute.js"],"sourcesContent":["import React, {useContext} from \"react\";\nimport { Navigate, Route, useLocation } from \"react-router-dom\";\nimport NotFound from \"../notFound/NotFound\";\nimport {Context} from \"../../index\";\n\nexport const PrivateRoute = ({ children, roles }) => {\n  const { store } = useContext(Context);\n  let location = useLocation();\n  const role = localStorage.getItem(\"role\");\n\n  if (store.isLoading) {\n    return <div></div>;\n  }\n\n  const userHasRequiredRole = role && roles.includes(role) ? true : false;\n  console.log(role)\n\n  if (!store.isAuth) {\n    return <Navigate to=\"/login\" state={{ from: location }} />;\n  }\n\n  if (store.isAuth && !userHasRequiredRole) {\n    return <NotFound />;\n  }\n\n  return children;\n};\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,UAAf,QAAgC,OAAhC;AACA,SAASC,QAAT,EAAmBC,KAAnB,EAA0BC,WAA1B,QAA6C,kBAA7C;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AAEA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAAyB;EAAA,IAAtBC,QAAsB,QAAtBA,QAAsB;EAAA,IAAZC,KAAY,QAAZA,KAAY;;EAAA,kBACjCR,UAAU,CAACK,OAAD,CADuB;EAAA,IAC3CI,KAD2C,eAC3CA,KAD2C;;EAEnD,IAAIC,QAAQ,GAAGP,WAAW,EAA1B;EACA,IAAMQ,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb;;EAEA,IAAIJ,KAAK,CAACK,SAAV,EAAqB;IACnB,oBAAO;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAP;EACD;;EAED,IAAMC,mBAAmB,GAAGJ,IAAI,IAAIH,KAAK,CAACQ,QAAN,CAAeL,IAAf,CAAR,GAA+B,IAA/B,GAAsC,KAAlE;EACAM,OAAO,CAACC,GAAR,CAAYP,IAAZ;;EAEA,IAAI,CAACF,KAAK,CAACU,MAAX,EAAmB;IACjB,oBAAO,oBAAC,QAAD;MAAU,EAAE,EAAC,QAAb;MAAsB,KAAK,EAAE;QAAEC,IAAI,EAAEV;MAAR,CAA7B;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAP;EACD;;EAED,IAAID,KAAK,CAACU,MAAN,IAAgB,CAACJ,mBAArB,EAA0C;IACxC,oBAAO,oBAAC,QAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAP;EACD;;EAED,OAAOR,QAAP;AACD,CArBM"},"metadata":{},"sourceType":"module"}